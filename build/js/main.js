"use strict";

function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
document.addEventListener('DOMContentLoaded', function () {
  var space = document.querySelector('.space');
  var earthContainer = document.querySelector('.earth-container');
  var earth = document.querySelector('#earth');
  var ship = document.getElementById('ship');
  var containerRect = earthContainer.getBoundingClientRect();
  var heartsContainer = document.querySelector('.hearts-container');
  var btnStart = document.querySelector('.start');
  var btnRestart = document.querySelector('.restart-btn');
  var menu = document.querySelector('.menu');
  var gameOverMenu = document.querySelector('.end-overlay');
  var endScore = document.querySelector('.end-overlay__score');
  var hearts = document.querySelectorAll('.heart');
  var earthRadius = containerRect.width / 2;
  var score = 0;
  var heartsCount = 3;
  var gameOver = false;
  var gameStart = false;
  function start() {
    if (gameStart || !gameOver) {
      var updateShipPosition = function updateShipPosition(angle) {
        var shipX = containerRect.left + containerRect.width / 2 + earthRadius * Math.cos(angle);
        var shipY = containerRect.top + containerRect.height / 2 + earthRadius * Math.sin(angle);
        ship.style.left = shipX - ship.clientWidth / 2 + 'px';
        ship.style.top = shipY - ship.clientHeight / 2 + 'px';
        ship.style.transform = "rotate(".concat(angle, "rad)");
      };
      var checkCollision = function checkCollision(elem1, elem2) {
        if (gameStart) {
          var elem1Rect = elem1.getBoundingClientRect();
          var elem2Rect = elem2.getBoundingClientRect();
          // console.log(elem1)
          // console.log(elem2)
          //
          // console.log(elem1Rect)
          // console.log(elem2Rect)
          return elem1Rect.left < elem2Rect.right && elem1Rect.right > elem2Rect.left && elem1Rect.top < elem2Rect.bottom && elem1Rect.bottom > elem2Rect.top;
        }
      };
      var setScore = function setScore(score) {
        var scoreView = document.createElement('div');
        scoreView.className = 'score';
        space.appendChild(scoreView);
        scoreView.innerHTML = "<h1>your score</h1> : <span>".concat(score, "</span>");
      };
      var removeScore = function removeScore() {
        var scoreView = document.querySelector('.score');
        scoreView.parentNode.removeChild(scoreView);
      };
      var checkHearts = function checkHearts() {
        // console.log(hearts.length)
        hearts.forEach(function (heart, i) {
          if (gameStart) {
            if (heartsCount < 1) {
              gameOver = true;
              gameStart = false;
              console.log("gameover");
            }
            if (i === heartsCount) {
              console.log(heart);
              heartsContainer.removeChild(heart);
            }
          }
          if (gameOver) {
            gameOverMenu.style.display = "flex";
            space.style.display = "none";
            endScore.innerText = score;
            clearInterval(spawnInterval);
            document.querySelector('.moving-element-horizontal').remove();
            document.querySelector('.moving-element-vertical').remove();
          }
        });
      };
      var moveEnemies = function moveEnemies(movingElementHorizontal, movingElementVertical) {
        if (gameStart) {
          movingElementHorizontal.style.animation = 'moveToCenter 5s linear';
          movingElementVertical.style.animation = 'moveToCenter 5s linear';
        }
        function animateHorizontal() {
          if (checkCollision(movingElementHorizontal, earth) || checkCollision(movingElementHorizontal, ship)) {
            space.removeChild(movingElementHorizontal);
            heartsCount--;
            checkHearts();
          } else {
            requestAnimationFrame(animateHorizontal);
          }
        }
        function animateVertical() {
          if (checkCollision(movingElementVertical, earth) || checkCollision(movingElementVertical, ship)) {
            space.removeChild(movingElementVertical);
            heartsCount--;
            checkHearts();
          } else {
            requestAnimationFrame(animateVertical);
          }
        }
        animateHorizontal();
        animateVertical();
      };
      var spawnEnemies = function spawnEnemies() {
        var movingElementHorizontal = document.createElement('div');
        var movingElementVertical = document.createElement('div');
        var horizontalStartX = Math.random() < 0.5 ? -50 : window.innerWidth + 50; // Поза лівим або правим краєм екрану
        var horizontalStartY = Math.random() * window.innerHeight;
        var verticalStartY = Math.random() < 0.5 ? -50 : window.innerHeight + 50; // Поза лівим або правим краєм екрану
        var verticalStartX = Math.random() * window.innerWidth;
        movingElementHorizontal.className = 'moving-element-horizontal';
        movingElementVertical.className = 'moving-element-vertical';
        space.appendChild(movingElementHorizontal);
        space.appendChild(movingElementVertical);
        movingElementHorizontal.style.left = horizontalStartX + 'px';
        movingElementHorizontal.style.top = horizontalStartY + 'px';
        // movingElementHorizontal.style.animation = 'moveToCenter 5s linear';

        movingElementVertical.style.left = verticalStartX + 'px';
        movingElementVertical.style.top = verticalStartY + 'px';
        // movingElementVertical.style.animation = 'moveToCenter 5s linear';

        moveEnemies(movingElementHorizontal, movingElementVertical);
      };
      updateShipPosition();
      setScore(score);
      if (gameStart) {
        document.addEventListener('mousemove', function (e) {
          var mouseX = e.clientX - containerRect.left;
          var mouseY = e.clientY - containerRect.top;
          ship.style.opacity = "1";
          var angle = Math.atan2(mouseY - containerRect.height / 2, mouseX - containerRect.width / 2);
          updateShipPosition(angle);
        });
      }
      var canFire = 1;
      if (gameStart) {
        document.addEventListener('click', function (e) {
          var bullet = document.createElement('div');
          var mouseX = e.clientX - containerRect.left;
          var mouseY = e.clientY - containerRect.top;
          var angle = Math.atan2(mouseY - containerRect.height / 2, mouseX - containerRect.width / 2);
          updateShipPosition(angle);
          if (canFire <= 1 && document.querySelectorAll('.bullet').length < 6) {
            canFire++;
            console.log(canFire);
            bullet.className = 'bullet';
            bullet.style.position = 'absolute';
            bullet.style.width = '40px';
            bullet.style.height = '10px';
            bullet.style.background = 'red';
            space.appendChild(bullet);
            bullet.style.left = ship.style.left;
            bullet.style.top = ship.style.top;
            bullet.style.transform = "rotate(".concat(angle, "rad)");
          }
          setTimeout(function () {
            canFire = 1;
          }, 500);
          var bulletSpeed = 9;
          var bulletDX = bulletSpeed * Math.cos(angle);
          var bulletDY = bulletSpeed * Math.sin(angle);
          function moveBullet() {
            var bulletX = parseFloat(bullet.style.left);
            var bulletY = parseFloat(bullet.style.top);
            bullet.style.left = bulletX + bulletDX + 'px';
            bullet.style.top = bulletY + bulletDY + 'px';
            var movingElementsHorizontal = document.querySelectorAll('.moving-element-horizontal');
            var _iterator = _createForOfIteratorHelper(movingElementsHorizontal),
              _step;
            try {
              for (_iterator.s(); !(_step = _iterator.n()).done;) {
                var movingElement = _step.value;
                if (checkCollision(bullet, movingElement)) {
                  space.removeChild(bullet);
                  movingElement.parentNode.removeChild(movingElement);
                  removeScore();
                  score++;
                  setScore(score);
                  return;
                }
              }
            } catch (err) {
              _iterator.e(err);
            } finally {
              _iterator.f();
            }
            var movingElementsVertical = document.querySelectorAll('.moving-element-vertical');
            var _iterator2 = _createForOfIteratorHelper(movingElementsVertical),
              _step2;
            try {
              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                var _movingElement = _step2.value;
                if (checkCollision(bullet, _movingElement)) {
                  space.removeChild(bullet);
                  space.removeChild(_movingElement);
                  removeScore();
                  score++;
                  setScore(score);
                  return;
                }
              }
            } catch (err) {
              _iterator2.e(err);
            } finally {
              _iterator2.f();
            }
            if (bulletX < 0 || bulletX > window.innerWidth || bulletY < 0 || bulletY > window.innerHeight) {
              space.removeChild(bullet);
            } else {
              requestAnimationFrame(moveBullet);
            }
          }
          moveBullet();
        });
      }
      var spawnInterval = setInterval(spawnEnemies, Math.random() * 2000 + 1000);
    }
    menu.style.zIndex = '-1';
    menu.style.opacity = '0';
  }
  btnStart.addEventListener('click', function () {
    gameStart = true;
    start();
  });
  btnRestart.addEventListener('click', function () {
    gameStart = true;
    gameOver = false;
    score = 0;
    gameOverMenu.style.display = 'none';
    space.style.display = 'flex';
    start();
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwic3BhY2UiLCJxdWVyeVNlbGVjdG9yIiwiZWFydGhDb250YWluZXIiLCJlYXJ0aCIsInNoaXAiLCJnZXRFbGVtZW50QnlJZCIsImNvbnRhaW5lclJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJoZWFydHNDb250YWluZXIiLCJidG5TdGFydCIsImJ0blJlc3RhcnQiLCJtZW51IiwiZ2FtZU92ZXJNZW51IiwiZW5kU2NvcmUiLCJoZWFydHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWFydGhSYWRpdXMiLCJ3aWR0aCIsInNjb3JlIiwiaGVhcnRzQ291bnQiLCJnYW1lT3ZlciIsImdhbWVTdGFydCIsInN0YXJ0IiwidXBkYXRlU2hpcFBvc2l0aW9uIiwiYW5nbGUiLCJzaGlwWCIsImxlZnQiLCJNYXRoIiwiY29zIiwic2hpcFkiLCJ0b3AiLCJoZWlnaHQiLCJzaW4iLCJzdHlsZSIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwidHJhbnNmb3JtIiwiY29uY2F0IiwiY2hlY2tDb2xsaXNpb24iLCJlbGVtMSIsImVsZW0yIiwiZWxlbTFSZWN0IiwiZWxlbTJSZWN0IiwicmlnaHQiLCJib3R0b20iLCJzZXRTY29yZSIsInNjb3JlVmlldyIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhcHBlbmRDaGlsZCIsImlubmVySFRNTCIsInJlbW92ZVNjb3JlIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiY2hlY2tIZWFydHMiLCJmb3JFYWNoIiwiaGVhcnQiLCJpIiwiY29uc29sZSIsImxvZyIsImRpc3BsYXkiLCJpbm5lclRleHQiLCJjbGVhckludGVydmFsIiwic3Bhd25JbnRlcnZhbCIsInJlbW92ZSIsIm1vdmVFbmVtaWVzIiwibW92aW5nRWxlbWVudEhvcml6b250YWwiLCJtb3ZpbmdFbGVtZW50VmVydGljYWwiLCJhbmltYXRpb24iLCJhbmltYXRlSG9yaXpvbnRhbCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImFuaW1hdGVWZXJ0aWNhbCIsInNwYXduRW5lbWllcyIsImhvcml6b250YWxTdGFydFgiLCJyYW5kb20iLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaG9yaXpvbnRhbFN0YXJ0WSIsImlubmVySGVpZ2h0IiwidmVydGljYWxTdGFydFkiLCJ2ZXJ0aWNhbFN0YXJ0WCIsImUiLCJtb3VzZVgiLCJjbGllbnRYIiwibW91c2VZIiwiY2xpZW50WSIsIm9wYWNpdHkiLCJhdGFuMiIsImNhbkZpcmUiLCJidWxsZXQiLCJsZW5ndGgiLCJwb3NpdGlvbiIsImJhY2tncm91bmQiLCJzZXRUaW1lb3V0IiwiYnVsbGV0U3BlZWQiLCJidWxsZXREWCIsImJ1bGxldERZIiwibW92ZUJ1bGxldCIsImJ1bGxldFgiLCJwYXJzZUZsb2F0IiwiYnVsbGV0WSIsIm1vdmluZ0VsZW1lbnRzSG9yaXpvbnRhbCIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIiwiX3N0ZXAiLCJzIiwibiIsImRvbmUiLCJtb3ZpbmdFbGVtZW50IiwidmFsdWUiLCJlcnIiLCJmIiwibW92aW5nRWxlbWVudHNWZXJ0aWNhbCIsIl9pdGVyYXRvcjIiLCJfc3RlcDIiLCJzZXRJbnRlcnZhbCIsInpJbmRleCJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQUEsUUFBUSxDQUFDQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxZQUFNO0VBQ2hELElBQU1DLEtBQUssR0FBR0YsUUFBUSxDQUFDRyxhQUFhLENBQUMsUUFBUSxDQUFDO0VBQzlDLElBQU1DLGNBQWMsR0FBR0osUUFBUSxDQUFDRyxhQUFhLENBQUMsa0JBQWtCLENBQUM7RUFDakUsSUFBTUUsS0FBSyxHQUFHTCxRQUFRLENBQUNHLGFBQWEsQ0FBQyxRQUFRLENBQUM7RUFDOUMsSUFBTUcsSUFBSSxHQUFHTixRQUFRLENBQUNPLGNBQWMsQ0FBQyxNQUFNLENBQUM7RUFDNUMsSUFBTUMsYUFBYSxHQUFHSixjQUFjLENB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TyxHQUFHLEdBQUc7RUFDNUI7RUFFQTdFLFFBQVEsQ0FBQ1YsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQU07SUFDckNzQixTQUFTLEdBQUcsSUFBSTtJQUNoQkMsS0FBSyxFQUFFO0VBQ1gsQ0FBQyxDQUFDO0VBQ0ZaLFVBQVUsQ0FBQ1gsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQU07SUFDdkNzQixTQUFTLEdBQUcsSUFBSTtJQUNoQkQsUUFBUSxHQUFHLEtBQUs7SUFDaEJGLEtBQUssR0FBRyxDQUFDO0lBQ1ROLFlBQVksQ0FBQ3FCLEtBQUssQ0FBQzJCLE9BQU8sR0FBRyxNQUFNO0lBQ25DNUQsS0FBSyxDQUFDaUMsS0FBSyxDQUFDMkIsT0FBTyxHQUFHLE1BQU07SUFDNUJ0QyxLQUFLLEVBQUU7RUFDWCxDQUFDLENBQUM7QUFDTixDQUFDLENBQUMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgY29uc3Qgc3BhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3BhY2UnKVxuICAgIGNvbnN0IGVhcnRoQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVhcnRoLWNvbnRhaW5lcicpO1xuICAgIGNvbnN0IGVhcnRoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VhcnRoJylcbiAgICBjb25zdCBzaGlwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NoaXAnKTtcbiAgICBjb25zdCBjb250YWluZXJSZWN0ID0gZWFydGhDb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgaGVhcnRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYXJ0cy1jb250YWluZXInKVxuICAgIGNvbnN0IGJ0blN0YXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0YXJ0JylcbiAgICBjb25zdCBidG5SZXN0YXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlc3RhcnQtYnRuJylcbiAgICBjb25zdCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnUnKVxuICAgIGNvbnN0IGdhbWVPdmVyTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbmQtb3ZlcmxheScpXG4gICAgY29uc3QgZW5kU2NvcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZW5kLW92ZXJsYXlfX3Njb3JlJylcbiAgICBsZXQgaGVhcnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlYXJ0JylcbiAgICBjb25zdCBlYXJ0aFJhZGl1cyA9IGNvbnRhaW5lclJlY3Qud2lkdGggLyAyO1xuICAgIGxldCBzY29yZSA9IDA7XG4gICAgbGV0IGhlYXJ0c0NvdW50ID0gMztcbiAgICBsZXQgZ2FtZU92ZXIgPSBmYWxzZVxuICAgIGxldCBnYW1lU3RhcnQgPSBmYWxzZVxuXG5cbiAgICBmdW5jdGlvbiBzdGFydCAoKXtcbiAgICAgICAgaWYoZ2FtZVN0YXJ0IHx8ICFnYW1lT3Zlcil7XG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVTaGlwUG9zaXRpb24oYW5nbGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgc2hpcFggPSBjb250YWluZXJSZWN0LmxlZnQgKyBjb250YWluZXJSZWN0LndpZHRoIC8gMiArIGVhcnRoUmFkaXVzICogTWF0aC5jb3MoYW5nbGUpO1xuICAgICAgICAgICAgICAgIGxldCBzaGlwWSA9IGNvbnRhaW5lclJlY3QudG9wICsgY29udGFpbmVyUmVjdC5oZWlnaHQgLyAyICsgZWFydGhSYWRpdXMgKiBNYXRoLnNpbihhbmdsZSk7XG5cbiAgICAgICAgICAgICAgICBzaGlwLnN0eWxlLmxlZnQgPSBzaGlwWCAtIHNoaXAuY2xpZW50V2lkdGggLyAyICsgJ3B4JztcbiAgICAgICAgICAgICAgICBzaGlwLnN0eWxlLnRvcCA9IHNoaXBZIC0gc2hpcC5jbGllbnRIZWlnaHQgLyAyICsgJ3B4JztcbiAgICAgICAgICAgICAgICBzaGlwLnN0eWxlLnRyYW5zZm9ybSA9IGByb3RhdGUoJHthbmdsZX1yYWQpYDtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlU2hpcFBvc2l0aW9uKCk7XG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0NvbGxpc2lvbihlbGVtMSwgZWxlbTIpIHtcbiAgICAgICAgICAgICAgICBpZihnYW1lU3RhcnQpe1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtMVJlY3QgPSBlbGVtMS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbTJSZWN0ID0gZWxlbTIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGVsZW0xKVxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlbGVtMilcbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZWxlbTFSZWN0KVxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlbGVtMlJlY3QpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtMVJlY3QubGVmdCA8IGVsZW0yUmVjdC5yaWdodCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbTFSZWN0LnJpZ2h0ID4gZWxlbTJSZWN0LmxlZnQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0xUmVjdC50b3AgPCBlbGVtMlJlY3QuYm90dG9tICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtMVJlY3QuYm90dG9tID4gZWxlbTJSZWN0LnRvcFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldFNjb3JlKHNjb3JlKXtcbiAgICAgICAgICAgICAgICBjb25zdCBzY29yZVZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICAgICAgICAgIHNjb3JlVmlldy5jbGFzc05hbWUgPSAnc2NvcmUnXG4gICAgICAgICAgICAgICAgc3BhY2UuYXBwZW5kQ2hpbGQoc2NvcmVWaWV3KVxuICAgICAgICAgICAgICAgIHNjb3JlVmlldy5pbm5lckhUTUwgPSBgPGgxPnlvdXIgc2NvcmU8L2gxPiA6IDxzcGFuPiR7c2NvcmV9PC9zcGFuPmBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZVNjb3JlKCl7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2NvcmVWaWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNjb3JlJylcbiAgICAgICAgICAgICAgICBzY29yZVZpZXcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY29yZVZpZXcpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRTY29yZShzY29yZSlcbiAgICAgICAgICAgIGlmIChnYW1lU3RhcnQpe1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtb3VzZVggPSBlLmNsaWVudFggLSBjb250YWluZXJSZWN0LmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtb3VzZVkgPSBlLmNsaWVudFkgLSBjb250YWluZXJSZWN0LnRvcDtcbiAgICAgICAgICAgICAgICAgICAgc2hpcC5zdHlsZS5vcGFjaXR5ID0gXCIxXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IGFuZ2xlID0gTWF0aC5hdGFuMihtb3VzZVkgLSBjb250YWluZXJSZWN0LmhlaWdodCAvIDIsIG1vdXNlWCAtIGNvbnRhaW5lclJlY3Qud2lkdGggLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2hpcFBvc2l0aW9uKGFuZ2xlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjYW5GaXJlID0gMVxuICAgICAgICAgICAgaWYoZ2FtZVN0YXJ0KXtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PntcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnVsbGV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IG1vdXNlWCA9IGUuY2xpZW50WCAtIGNvbnRhaW5lclJlY3QubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1vdXNlWSA9IGUuY2xpZW50WSAtIGNvbnRhaW5lclJlY3QudG9wO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYW5nbGUgPSBNYXRoLmF0YW4yKG1vdXNlWSAtIGNvbnRhaW5lclJlY3QuaGVpZ2h0IC8gMiwgbW91c2VYIC0gY29udGFpbmVyUmVjdC53aWR0aCAvIDIpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTaGlwUG9zaXRpb24oYW5nbGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FuRmlyZSA8PSAxICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idWxsZXQnKS5sZW5ndGggPCA2KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbkZpcmUrK1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIGNhbkZpcmUpXG4gICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQuY2xhc3NOYW1lID0gJ2J1bGxldCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0LnN0eWxlLndpZHRoID0gJzQwcHgnO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0LnN0eWxlLmhlaWdodCA9ICcxMHB4JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JlZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFjZS5hcHBlbmRDaGlsZChidWxsZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0LnN0eWxlLmxlZnQgPSBzaGlwLnN0eWxlLmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQuc3R5bGUudG9wID0gc2hpcC5zdHlsZS50b3A7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQuc3R5bGUudHJhbnNmb3JtID0gYHJvdGF0ZSgke2FuZ2xlfXJhZClgO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FuRmlyZSA9IDFcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwKVxuXG5cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBidWxsZXRTcGVlZCA9IDk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1bGxldERYID0gYnVsbGV0U3BlZWQgKiBNYXRoLmNvcyhhbmdsZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1bGxldERZID0gYnVsbGV0U3BlZWQgKiBNYXRoLnNpbihhbmdsZSk7XG5cblxuXG5cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbW92ZUJ1bGxldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBidWxsZXRYID0gcGFyc2VGbG9hdChidWxsZXQuc3R5bGUubGVmdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYnVsbGV0WSA9IHBhcnNlRmxvYXQoYnVsbGV0LnN0eWxlLnRvcCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldC5zdHlsZS5sZWZ0ID0gYnVsbGV0WCArIGJ1bGxldERYICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldC5zdHlsZS50b3AgPSBidWxsZXRZICsgYnVsbGV0RFkgKyAncHgnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtb3ZpbmdFbGVtZW50c0hvcml6b250YWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW92aW5nLWVsZW1lbnQtaG9yaXpvbnRhbCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb3ZpbmdFbGVtZW50IG9mIG1vdmluZ0VsZW1lbnRzSG9yaXpvbnRhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja0NvbGxpc2lvbihidWxsZXQsIG1vdmluZ0VsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlLnJlbW92ZUNoaWxkKGJ1bGxldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmluZ0VsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChtb3ZpbmdFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlU2NvcmUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZSsrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNjb3JlKHNjb3JlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbW92aW5nRWxlbWVudHNWZXJ0aWNhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb3ZpbmctZWxlbWVudC12ZXJ0aWNhbCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb3ZpbmdFbGVtZW50IG9mIG1vdmluZ0VsZW1lbnRzVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tDb2xsaXNpb24oYnVsbGV0LCBtb3ZpbmdFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFjZS5yZW1vdmVDaGlsZChidWxsZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFjZS5yZW1vdmVDaGlsZChtb3ZpbmdFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlU2NvcmUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZSsrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNjb3JlKHNjb3JlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0WCA8IDAgfHwgYnVsbGV0WCA+IHdpbmRvdy5pbm5lcldpZHRoIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0WSA8IDAgfHwgYnVsbGV0WSA+IHdpbmRvdy5pbm5lckhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2UucmVtb3ZlQ2hpbGQoYnVsbGV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKG1vdmVCdWxsZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1vdmVCdWxsZXQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrSGVhcnRzKCl7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaGVhcnRzLmxlbmd0aClcbiAgICAgICAgICAgICAgICBoZWFydHMuZm9yRWFjaCgoaGVhcnQsIGkpPT57XG4gICAgICAgICAgICAgICAgICAgIGlmKGdhbWVTdGFydCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVhcnRzQ291bnQgPCAxKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lT3ZlciA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lU3RhcnQgPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZ2FtZW92ZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGkgPT09IGhlYXJ0c0NvdW50KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhoZWFydClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFydHNDb250YWluZXIucmVtb3ZlQ2hpbGQoaGVhcnQpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYoZ2FtZU92ZXIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZU92ZXJNZW51LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2Uuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRTY29yZS5pbm5lclRleHQgPSBzY29yZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc3Bhd25JbnRlcnZhbClcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb3ZpbmctZWxlbWVudC1ob3Jpem9udGFsJykucmVtb3ZlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb3ZpbmctZWxlbWVudC12ZXJ0aWNhbCcpLnJlbW92ZSgpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gbW92ZUVuZW1pZXMobW92aW5nRWxlbWVudEhvcml6b250YWwsIG1vdmluZ0VsZW1lbnRWZXJ0aWNhbCl7XG4gICAgICAgICAgICAgICAgaWYgKGdhbWVTdGFydCl7XG4gICAgICAgICAgICAgICAgICAgIG1vdmluZ0VsZW1lbnRIb3Jpem9udGFsLnN0eWxlLmFuaW1hdGlvbiA9ICdtb3ZlVG9DZW50ZXIgNXMgbGluZWFyJztcbiAgICAgICAgICAgICAgICAgICAgbW92aW5nRWxlbWVudFZlcnRpY2FsLnN0eWxlLmFuaW1hdGlvbiA9ICdtb3ZlVG9DZW50ZXIgNXMgbGluZWFyJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBhbmltYXRlSG9yaXpvbnRhbCgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrQ29sbGlzaW9uKG1vdmluZ0VsZW1lbnRIb3Jpem9udGFsLCBlYXJ0aCkgfHwgY2hlY2tDb2xsaXNpb24obW92aW5nRWxlbWVudEhvcml6b250YWwsIHNoaXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFjZS5yZW1vdmVDaGlsZChtb3ZpbmdFbGVtZW50SG9yaXpvbnRhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFydHNDb3VudC0tXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0hlYXJ0cygpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZUhvcml6b250YWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFuaW1hdGVWZXJ0aWNhbCgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrQ29sbGlzaW9uKG1vdmluZ0VsZW1lbnRWZXJ0aWNhbCwgZWFydGgpIHx8IGNoZWNrQ29sbGlzaW9uKG1vdmluZ0VsZW1lbnRWZXJ0aWNhbCwgc2hpcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlLnJlbW92ZUNoaWxkKG1vdmluZ0VsZW1lbnRWZXJ0aWNhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFydHNDb3VudC0tXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0hlYXJ0cygpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZVZlcnRpY2FsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhbmltYXRlSG9yaXpvbnRhbCgpO1xuICAgICAgICAgICAgICAgIGFuaW1hdGVWZXJ0aWNhbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gc3Bhd25FbmVtaWVzKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vdmluZ0VsZW1lbnRIb3Jpem9udGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbW92aW5nRWxlbWVudFZlcnRpY2FsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgY29uc3QgaG9yaXpvbnRhbFN0YXJ0WCA9IE1hdGgucmFuZG9tKCkgPCAwLjUgPyAtNTAgOiB3aW5kb3cuaW5uZXJXaWR0aCArIDUwOyAvLyDQn9C+0LfQsCDQu9GW0LLQuNC8INCw0LHQviDQv9GA0LDQstC40Lwg0LrRgNCw0ZTQvCDQtdC60YDQsNC90YNcbiAgICAgICAgICAgICAgICBjb25zdCBob3Jpem9udGFsU3RhcnRZID0gTWF0aC5yYW5kb20oKSAqIHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJ0aWNhbFN0YXJ0WSA9IE1hdGgucmFuZG9tKCkgPCAwLjUgPyAtNTAgOiB3aW5kb3cuaW5uZXJIZWlnaHQgKyA1MDsgLy8g0J/QvtC30LAg0LvRltCy0LjQvCDQsNCx0L4g0L/RgNCw0LLQuNC8INC60YDQsNGU0Lwg0LXQutGA0LDQvdGDXG4gICAgICAgICAgICAgICAgY29uc3QgdmVydGljYWxTdGFydFggPSBNYXRoLnJhbmRvbSgpICogd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgICAgICAgICAgbW92aW5nRWxlbWVudEhvcml6b250YWwuY2xhc3NOYW1lID0gJ21vdmluZy1lbGVtZW50LWhvcml6b250YWwnO1xuICAgICAgICAgICAgICAgIG1vdmluZ0VsZW1lbnRWZXJ0aWNhbC5jbGFzc05hbWUgPSAnbW92aW5nLWVsZW1lbnQtdmVydGljYWwnO1xuICAgICAgICAgICAgICAgIHNwYWNlLmFwcGVuZENoaWxkKG1vdmluZ0VsZW1lbnRIb3Jpem9udGFsKTtcbiAgICAgICAgICAgICAgICBzcGFjZS5hcHBlbmRDaGlsZChtb3ZpbmdFbGVtZW50VmVydGljYWwpO1xuXG4gICAgICAgICAgICAgICAgbW92aW5nRWxlbWVudEhvcml6b250YWwuc3R5bGUubGVmdCA9IGhvcml6b250YWxTdGFydFggKyAncHgnO1xuICAgICAgICAgICAgICAgIG1vdmluZ0VsZW1lbnRIb3Jpem9udGFsLnN0eWxlLnRvcCA9IGhvcml6b250YWxTdGFydFkgKyAncHgnO1xuICAgICAgICAgICAgICAgIC8vIG1vdmluZ0VsZW1lbnRIb3Jpem9udGFsLnN0eWxlLmFuaW1hdGlvbiA9ICdtb3ZlVG9DZW50ZXIgNXMgbGluZWFyJztcblxuICAgICAgICAgICAgICAgIG1vdmluZ0VsZW1lbnRWZXJ0aWNhbC5zdHlsZS5sZWZ0ID0gdmVydGljYWxTdGFydFggKyAncHgnO1xuICAgICAgICAgICAgICAgIG1vdmluZ0VsZW1lbnRWZXJ0aWNhbC5zdHlsZS50b3AgPSB2ZXJ0aWNhbFN0YXJ0WSArICdweCc7XG4gICAgICAgICAgICAgICAgLy8gbW92aW5nRWxlbWVudFZlcnRpY2FsLnN0eWxlLmFuaW1hdGlvbiA9ICdtb3ZlVG9DZW50ZXIgNXMgbGluZWFyJztcblxuICAgICAgICAgICAgICAgIG1vdmVFbmVtaWVzKG1vdmluZ0VsZW1lbnRIb3Jpem9udGFsLCBtb3ZpbmdFbGVtZW50VmVydGljYWwpXG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHNwYXduSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChzcGF3bkVuZW1pZXMsIChNYXRoLnJhbmRvbSgpICogMjAwMCkgKyAxMDAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1lbnUuc3R5bGUuekluZGV4ID0gJy0xJ1xuICAgICAgICBtZW51LnN0eWxlLm9wYWNpdHkgPSAnMCdcbiAgICB9XG5cbiAgICBidG5TdGFydC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgZ2FtZVN0YXJ0ID0gdHJ1ZTtcbiAgICAgICAgc3RhcnQoKVxuICAgIH0pXG4gICAgYnRuUmVzdGFydC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgZ2FtZVN0YXJ0ID0gdHJ1ZTtcbiAgICAgICAgZ2FtZU92ZXIgPSBmYWxzZTtcbiAgICAgICAgc2NvcmUgPSAwO1xuICAgICAgICBnYW1lT3Zlck1lbnUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgc3BhY2Uuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgc3RhcnQoKTtcbiAgICB9KVxufSk7XG4iXX0=
